<div class="space-y-4">

  <!-- Jobs List -->
  <div class="space-y-4">
    <div *ngFor="let job of paginatedJobs"
      class="bg-white rounded-lg border border-slate-200 hover:shadow-md transition-all duration-200 relative group">

      <!-- Favorite Button -->
      <button *ngIf="isAuthenticated()" (click)="addToFavorites.emit(job); $event.stopPropagation()"
        class="absolute top-5 right-5 p-2 rounded-lg hover:bg-slate-100 transition-colors z-10">
        <svg class="w-5 h-5" [class.text-rose-500]="isFavorite(job)" [class.fill-rose-500]="isFavorite(job)"
          [class.text-slate-400]="!isFavorite(job)" fill="none" stroke="currentColor" stroke-width="2"
          viewBox="0 0 24 24">
          <path
            d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
        </svg>
      </button>

      <div class="p-6 pr-14">
        <div class="flex gap-4">
          <!-- Company Logo -->
          <div class="flex-shrink-0">
            <div
              class="w-12 h-12 bg-slate-900 rounded-lg flex items-center justify-center text-white font-bold text-lg">
              {{ job.company.charAt(0) }}
            </div>
          </div>

          <!-- Job Content -->
          <div class="flex-1 min-w-0">
            <!-- Title -->
            <h3 class="text-base font-bold text-slate-900 mb-2 group-hover:text-blue-600 transition-colors">
              {{ job.title }}
            </h3>

            <!-- Meta Info -->
            <div class="flex flex-wrap items-center gap-x-3 gap-y-1 text-xs mb-3">
              <span class="font-semibold text-blue-600">{{ job.company }}</span>
              <span class="text-slate-400">•</span>
              <span class="text-slate-600 flex items-center gap-1">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                  <circle cx="12" cy="10" r="3" />
                </svg>
                {{ job.location }}
              </span>
              <span class="text-slate-400">•</span>
              <span class="text-slate-600 flex items-center gap-1">
                <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                {{ job.date | date:'MMM d' }}
              </span>
            </div>

            <!-- Description -->
            <p class="text-sm text-slate-600 line-clamp-2 mb-4 leading-relaxed" [innerHTML]="job.description"></p>

            <!-- Action Buttons -->
            <div class="flex gap-3">
              <a [href]="job.sourceUrl" target="_blank"
                class="px-6 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg hover:bg-blue-700 transition-colors">
                Voir l'offre
              </a>
              <button *ngIf="isAuthenticated()" (click)="applyToJob.emit(job)"
                class="px-6 py-2 bg-green-600 text-white text-sm font-semibold rounded-lg hover:bg-green-700 transition-colors">
                Suivre cette candidature
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Load More Button -->
  <div *ngIf="totalPages > 1 && currentPage < totalPages" class="text-center pt-6">
    <button (click)="onPageChange(currentPage + 1)"
      class="px-6 py-3 border-2 border-slate-300 text-slate-700 font-semibold rounded-lg hover:bg-slate-50 transition-colors text-sm">
      Load More Results
      <svg class="w-4 h-4 inline-block ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7" />
      </svg>
    </button>
  </div>

  <!-- Pagination -->
  <div *ngIf="totalPages > 1" class="flex items-center justify-center gap-2 pt-8">
    <button *ngFor="let page of getPages()" (click)="onPageChange(page)"
      class="w-10 h-10 flex items-center justify-center rounded-lg text-sm font-bold transition-all"
      [class.bg-blue-600]="page === currentPage" [class.text-white]="page === currentPage"
      [class.shadow-md]="page === currentPage" [class.border]="page !== currentPage"
      [class.border-slate-300]="page !== currentPage" [class.text-slate-700]="page !== currentPage"
      [class.hover:bg-slate-50]="page !== currentPage">
      {{ page }}
    </button>

    <span *ngIf="totalPages > 5" class="px-2 text-slate-400">...</span>

    <button *ngIf="totalPages > 5" (click)="onPageChange(totalPages)"
      class="w-10 h-10 flex items-center justify-center rounded-lg border border-slate-300 text-slate-700 text-sm font-bold hover:bg-slate-50 transition-all">
      {{ totalPages }}
    </button>

    <button (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages"
      class="w-10 h-10 flex items-center justify-center rounded-lg border border-slate-300 text-slate-700 hover:bg-slate-50 disabled:opacity-30 disabled:cursor-not-allowed transition-all">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 18 6-6-6-6" />
      </svg>
    </button>
  </div>

</div>